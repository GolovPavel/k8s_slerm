# Job/CronJob

## 1. Создайте CronJob из манифеста cronjob.yml

https://kubernetes.io/docs/tasks/job/automated-tasks-with-cron-jobs/

Cron job запускается один раз в минуту, только в одном экземпляре.
Хранит 4 успешных попытки выполнения и 3 неуспешных.
Позволяет работать поду не дольше 140 секунд и трех раз.

```bash
kubectl apply -f ../cronjob.yml

kubectl get all
```

## 2. В течение 5-10 минут понаблюдайте за поведением CronJob

Часто ли поды завершаются успешно ?

> вероятность успешного завершения одной задачи 25%, в Job делается 3-4 попытки на выполнение, итого вероятность успешного завершения от 58% до 68%.
> но у нас есть еще и лимит в 140 секунд на все попытки, и в итоге посчитать вероятность достаточно сложно, да и точные цифры не нужны...

> Проще последить за процессом и выдать оценочное суждение - часто или редко.

Кто и по какой причине прерывает выполнение джобов ?

> Job controller прерывает, по лимитам, прописанным в темплейте Job

Пропускает ли cronjob запуски задач ?

> Пропускает, если с момента запуска задачи прошло больше минуты, то пропустит все запуски, кроме последнего запланированного.


## 3. Очищаем кластер

```
kubectl delete cronjob rnd-sleep
```
